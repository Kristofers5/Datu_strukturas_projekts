import requests
from bs4 import BeautifulSoup

print("nodaļa vai grāmata")
funkcija = input()

if funkcija == "nodaļa":
    print("Ievadiet linku uz nodaļu:")
    adrese = input()
    print("Faila nosaukums:")
    faila_nosaukums = input()
else:
    print("error")
    exit()

# adrese = "https://www.royalroad.com/fiction/65058/pale-lights/chapter/1124855/chapter-1"

lapa = requests.get(adrese)
if lapa.status_code == 200:
    lapas_saturs = BeautifulSoup(lapa.content, "html.parser")
    # print(lapas_saturs.prettify())

    content_div = lapas_saturs.find("div", {"class": "chapter-content"})

    paragraphs = content_div.find_all("p")


    # test print

    # for line in paragraphs:
    #     print(line.contents)

    try:
        f = open(f"{faila_nosaukums}.txt", "x")
    except:
        print("file already exists")

    with open(f"{faila_nosaukums}.txt", "w") as f:
        f.write(f"{faila_nosaukums}\n\n\n\n")

        for line in paragraphs:
            f.write(line.get_text())
            f.write("\n\n")